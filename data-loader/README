Для загрузки данных используйте load-data.py. Имейте в виду, что программа перезаписывает файл, не спрашивая
(по умолчанию название файла - название инструмента.csv, но это можно изменить). 
Даже если произошла ошибка, например при записи в базу, данные всё равно могли быть сохранены, проверьте.
Если на сервере нет всех данных, что вам нужны, а загружать с IB вы не можете/не хотите, просто ответьте да и остановите программу. Данные сохранятся.
В ноутбуках наброски кода, который потом идёт в скрипты, некоторые вещи там могут не работать/работать неправильно.
Если непонятно как работать с программой, используйте -h.


Как использовать: 

Скачать USDJPY период с 2020-01-01 по 2021-01-01 в файл ./data-loader/usdjpyforex.csv
python3 ./data-loader/load-data-db.py USDJPY 20200101 20210101 -f ./data-loader/usdjpyforex.csv

Скачать все доступные бары до 2019-01-01 USDJPY в файл ./USDJPY.csv
python3 ./data-loader/load-data-db.py USDJPY . 20190101

Скачать все доступные бары USDJPY в файл ./USDJPY.csv
python3 ./data-loader/load-data-db.py USDJPY

Вывести список доступных инструментов
python3 ./data-loader/load-data-db.py



Install dependencies:
pip3 install ib_insync sqlalchemy pandas argparse